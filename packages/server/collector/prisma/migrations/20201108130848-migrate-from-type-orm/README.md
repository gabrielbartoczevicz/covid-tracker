# Migration `20201108130848-migrate-from-type-orm`

This migration has been generated by Gabriel Bartoczevicz at 11/8/2020, 10:08:48 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."cities" (
"id" text   NOT NULL ,
"name" text   NOT NULL ,
"state_id" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."notifications" (
"id" text   NOT NULL ,
"date" timestamp(3)   NOT NULL ,
"epi_week" integer   NOT NULL ,
"notifications" integer   NOT NULL ,
"deaths" integer   NOT NULL ,
"recovered" integer   NOT NULL ,
"city_id" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."states" (
"id" text   NOT NULL ,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."cities" ADD FOREIGN KEY("state_id")REFERENCES "public"."states"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."notifications" ADD FOREIGN KEY("city_id")REFERENCES "public"."cities"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201108130848-migrate-from-type-orm
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,39 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model City {
+  id            String          @id @default(uuid())
+  name          String
+  stateId       String          @map("state_id")
+  state         State           @relation(fields: [stateId], references: [id])
+  notifications Notification[]
+
+  @@map("cities")
+}
+
+model Notification {
+  id            String   @id @default(uuid())
+  date          DateTime
+  epiWeek       Int      @map("epi_week")
+  notifications Int
+  deaths        Int
+  recovered     Int
+  cityId        String   @map("city_id")
+  city          City     @relation(fields: [cityId], references: [id])
+
+  @@map("notifications")
+}
+
+model State {
+  id         String   @id @default(uuid())
+  name       String
+  cities     City[]
+
+  @@map("states")
+}
```


